"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[469],{7940:function(e,t,n){n.d(t,{K:function(){return o}});n(2791);var r=n(184);function o(e){var t=e.id,n=e.name,o=e.value,s=e.onChange;return(0,r.jsx)("textarea",{id:t,name:n,value:o,onChange:s})}},4304:function(e,t,n){n.d(t,{NI:function(){return l},II:function(){return c},ZP:function(){return u}});n(2791);var r=n(857),o="Form_form__e1yzW",s="Form_label-text__-KdfF",a="Form_error-message__pIAv9",i=n(184);function u(e){var t=e.children,n=e.onSubmit,s=e.isLoading,a=e.customButtons;return(0,i.jsxs)("form",{onSubmit:n,className:o,children:[t,!a&&(0,i.jsx)("button",{type:"submit",disabled:s,children:s?(0,i.jsx)(r.Z,{}):"Submit"})]})}function c(e){var t=e.type,n=e.id,r=e.name,o=e.value,s=e.onChange,a=e.required;return(0,i.jsx)("input",{type:t,id:n,name:r,value:o,onChange:s,required:a})}var d=n(885),m=n(9647);function l(e){var t,n=e.children,r=e.id,o=e.label,u=e.errors,c=void 0===u?[]:u,l=(0,m.u)(),f=(0,d.Z)(l,1)[0],h=null===(t=c.find((function(e){return e.param===r})))||void 0===t?void 0:t.msg;return(0,i.jsxs)("label",{htmlFor:r,ref:f,children:[(0,i.jsx)("p",{className:s,children:o}),n,h&&(0,i.jsx)("p",{className:a,children:h})]})}n(7940)},5340:function(e,t,n){n.d(t,{$:function(){return d}});var r=n(2791),o=n(8214),s=n(5861),a=n(6196),i=n(7069),u=n(184),c=r.memo((function(e){var t=e.comment,n=e.isAuthor,r=e.postId,c=(0,a.Z)().deleteComment,d=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(r,t._id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{className:i.Z["comment-box"],children:[(0,u.jsxs)("div",{className:i.Z["comment-box__header"],children:[(0,u.jsx)("h4",{children:t.user.username}),(0,u.jsx)("span",{children:t.formattedDate})]}),(0,u.jsx)("p",{children:t.text}),n&&(0,u.jsx)("div",{children:(0,u.jsx)("button",{type:"button",onClick:d,className:i.Z["delete-button"],children:"Delete"})})]})})),d=r.memo((function(e){var t=e.comments,n=e.isAuthor,r=e.postId;return(0,u.jsx)(u.Fragment,{children:t.map((function(e){return(0,u.jsx)(c,{comment:e,isAuthor:n,postId:r},e._id)}))})}))},857:function(e,t,n){n.d(t,{Z:function(){return s}});var r="Spinner_spinner__Z6H3Z",o=n(184);function s(){return(0,o.jsx)("div",{className:r,children:(0,o.jsx)("div",{})})}},6196:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(2791),o=n(5579);function s(){var e=r.useContext(o.i);if(!e)throw new Error("useCMS can only be used inside a CMSProvider");return e}},8607:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(2791),o=n(49);function s(){var e=r.useContext(o.c);if(!e)throw new Error("useDB can only be used inside a DBProvider");return e}},2954:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(4942),o=n(1413),s=n(885),a=n(2791);function i(e){var t=a.useState(e),n=(0,s.Z)(t,2),i=n[0],u=n[1],c=a.useState([]),d=(0,s.Z)(c,2);return{formValues:i,errors:d[0],changeHandler:function(e){var t=e.target,n=t.name,s=t.value,a=t.files;u((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,r.Z)({},n,"image"===n?null===a||void 0===a?void 0:a[0]:s))}))},setErrors:d[1],setFormValues:u}}},1469:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(885),o=n(2791),s=n(9647),a=n(6871),i=n(8214),u=n(5861),c=n(2954),d=n(3397),m=n(4304),l=n(7940),f=n(5340),h=n(4371),x=n(7069),v=n(184),p={text:""};function _(e){var t=e.comments,n=e.postId,a=e.createComment,_=e.getPost,j=e.loadComments,b=(0,h.Z)().user,Z=(0,c.Z)(p),g=Z.formValues,C=Z.changeHandler,P=Z.errors,y=Z.setErrors,D=o.useState(!1),N=(0,r.Z)(D,2),w=N[0],I=N[1],F=o.useState(2),S=(0,r.Z)(F,2),k=S[0],E=S[1],A=(0,s.u)(),V=(0,r.Z)(A,1)[0],z=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),I(!0),e.next=5,a(g.text,n);case 5:if(r=e.sent,I(!1),!r.data.errors){e.next=9;break}return e.abrupt("return",y(r.data.errors));case 9:return e.next=11,_(n);case 11:E(2),y([]),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),y((0,d.Z)(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{ref:V,children:[(0,v.jsx)("h4",{children:"Comments"}),b?(0,v.jsx)(m.ZP,{onSubmit:z,isLoading:w,children:(0,v.jsx)(m.NI,{id:"text",label:"Write a Comment",errors:P,children:(0,v.jsx)(l.K,{name:"text",id:"text",value:g.text,onChange:C})})}):(0,v.jsx)("div",{children:"You must be logged in to post a comment!"}),(0,v.jsx)(f.$,{comments:t}),t.length&&t.length%(10*(k-1))===0?(0,v.jsx)("button",{className:x.Z["load-more"],type:"button",onClick:function(){j(k,n),E(k+1)},children:"Load more"}):""]})}var j=n(8607),b=n(3540),Z="PostDetail_header__top__nse8w",g="PostDetail_header__OznDF",C="PostDetail_image-container__7xZDF",P="PostDetail_post-body__iyCYU";function y(e){var t=e.body;return(0,v.jsx)("div",{className:P,children:(0,v.jsx)("div",{children:(0,b.ZP)(t)})})}function D(e){var t=e.author,n=e.tag,r=e.date,o=e.title,s=e.image;return(0,v.jsxs)("div",{className:g,children:[(0,v.jsxs)("div",{className:Z,children:[(0,v.jsx)("span",{children:n}),(0,v.jsx)("span",{children:r}),(0,v.jsx)("span",{children:t})]}),(0,v.jsx)("h1",{children:o}),(0,v.jsx)("div",{className:C,children:(0,v.jsx)("img",{src:s,alt:""})})]})}function N(){var e=(0,a.UO)().postId,t=(0,j.Z)(),n=t.documents.post,i=t.getPost,u=t.loadComments,c=t.createComment,d=(0,s.u)(),m=(0,r.Z)(d,1)[0];return o.useEffect((function(){i(e)}),[]),(0,v.jsx)("div",{ref:m,children:n&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(D,{author:n.author.username,tag:n.tag,date:n.formattedDate,title:n.title,image:n.image}),(0,v.jsx)(y,{body:n.body}),(0,v.jsx)(_,{comments:n.comments,getPost:i,loadComments:u,createComment:c,postId:e})]})})}},3397:function(e,t,n){n.d(t,{Z:function(){return s}});var r="User does not exist",o="Invalid Password";function s(e){switch(e.response.data.message){case r:return[{param:"email",msg:r}];case o:return[{param:"password",msg:o}];default:return[]}}},7069:function(e,t){t.Z={"comment-box":"PostDetailComment_comment-box__1Qm4a","comment-box__header":"PostDetailComment_comment-box__header__yTINb","load-more":"PostDetailComment_load-more__sI0bC","delete-button":"PostDetailComment_delete-button__zVgF3"}}}]);
//# sourceMappingURL=469.ac2f18da.chunk.js.map